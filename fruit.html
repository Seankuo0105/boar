<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="google-site-verification" content="MxDUulCpJ4I7TC0vOGdyHx3eYYmHNcYHgRD6GLmd4hI" />
<title>å±±è±¬æ¥æ°´æœ</title>
<link rel="icon" type="image/png" href="pig.png">
<style>
body {
    margin: 0;
    overflow: hidden;
    background-color: #cceeff;
    font-family: Arial, sans-serif;
}
#gameCanvas {
    display: block;
    background-color: #a2d5f2;
}
#startBtn, #restartBtn {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 24px;
    font-size: 20px;
    font-weight: bold;
    border: none;
    border-radius: 8px;
    background-color: #ff9933;
    color: white;
    cursor: pointer;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}
#startBtn { top: 50%; }
#restartBtn { top: 60%; display: none; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<button id="startBtn">é–‹å§‹éŠæˆ²</button>
<button id="restartBtn">å†ç©ä¸€æ¬¡</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const startBtn = document.getElementById('startBtn');
const restartBtn = document.getElementById('restartBtn');

// å…¨è¢å¹•
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

// å±±è±¬è§’è‰²
const pigImg = new Image();
pigImg.src = 'pig.png';
let pigWidth = 100;
let pigHeight = 100;
let pigX = canvas.width/2 - pigWidth/2;
let pigY = canvas.height - pigHeight - 20;

// æ‰è½ç‰©
const fruits = [];
const fruitEmojis = ['ğŸ','ğŸŒ','ğŸ‡','ğŸ‰','ğŸ“'];
const bombEmoji = 'ğŸ’£';
const fruitSize = 40;

let score = 0;
let lives = 3;
let gameRunning = false;
let spawnTimer, gameTimer;

// ç”¢ç”Ÿæ°´æœæˆ–ç‚¸å½ˆ
function spawnFruit(){
    const x = Math.random() * (canvas.width - fruitSize);
    let emoji;
    if(Math.random() < 0.2){ // 20% ç‚¸å½ˆ
        emoji = bombEmoji;
    } else {
        emoji = fruitEmojis[Math.floor(Math.random()*fruitEmojis.length)];
    }
    fruits.push({x:x, y:-fruitSize, emoji:emoji});
}

function updateFruits(){
    for(let i=fruits.length-1;i>=0;i--){
        fruits[i].y += 5; // å›ºå®šé€Ÿåº¦

        if(fruits[i].y + fruitSize >= pigY &&
           fruits[i].x + fruitSize >= pigX &&
           fruits[i].x <= pigX + pigWidth){
            if(fruits[i].emoji === bombEmoji){
                lives--;
            } else {
                score++;
            }
            fruits.splice(i,1);
        } else if(fruits[i].y > canvas.height){
            fruits.splice(i,1);
        }
    }

    if(lives <= 0){
        endGame();
    }
}

function resetGame(){
    score = 0;
    lives = 3;
    fruits.length = 0;
    pigX = canvas.width/2 - pigWidth/2;
}

function drawInfo(){
    ctx.fillStyle='black';
    ctx.textAlign='left';
    ctx.font='32px Arial';
    ctx.fillText('å±±è±¬æ¥æ°´æœ',20,50);
    ctx.font='20px Arial';
    ctx.fillText('æ“ä½œæ–¹å¼ï¼šæ»‘é¼ æ‹–æ›³å±±è±¬æ¥æ°´æœï¼ˆå°å¿ƒç‚¸å½ˆï¼ï¼‰',20,80);

    ctx.textAlign='right';
    ctx.font='24px Arial';
    ctx.fillText(`åˆ†æ•¸: ${score}`, canvas.width-20, 50);
    ctx.fillText(`ç”Ÿå‘½: ${'â¤ï¸'.repeat(lives)}`, canvas.width-20, 80);
}

function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    drawInfo();

    // å±±è±¬
    ctx.drawImage(pigImg,pigX,pigY,pigWidth,pigHeight);

    // æ°´æœ & ç‚¸å½ˆ
    ctx.font = `${fruitSize}px Arial`;
    ctx.textAlign='left';
    for(const f of fruits){
        ctx.fillText(f.emoji,f.x,f.y);
    }

    if(gameRunning) requestAnimationFrame(draw);
}

function gameLoop(){
    if(!gameRunning) return;
    updateFruits();
}

// æ»‘é¼ æ§åˆ¶
canvas.addEventListener('mousemove',(e)=>{
    const rect = canvas.getBoundingClientRect();
    pigX = e.clientX - rect.left - pigWidth/2;
    pigX = Math.max(0,Math.min(canvas.width-pigWidth,pigX));
});

// é–‹å§‹éŠæˆ²
function startGame(){
    startBtn.style.display = 'none';
    restartBtn.style.display = 'none';
    resetGame();
    gameRunning = true;
    draw();
    spawnTimer = setInterval(spawnFruit,1000);
    gameTimer = setInterval(gameLoop,20);
}

// çµæŸéŠæˆ²
function endGame(){
    gameRunning = false;
    clearInterval(spawnTimer);
    clearInterval(gameTimer);

    ctx.fillStyle='black';
    ctx.font='50px Arial';
    ctx.textAlign='center';
    ctx.fillText(`éŠæˆ²çµæŸï¼åˆ†æ•¸: ${score}`, canvas.width/2, canvas.height/2);
    restartBtn.style.display = 'block';
}

startBtn.addEventListener('click', startGame);
restartBtn.addEventListener('click', startGame);

// åˆå§‹ç•«é¢
ctx.fillStyle='black';
ctx.font='50px Arial';
ctx.textAlign='center';
ctx.fillText('å±±è±¬æ¥æ°´æœ', canvas.width/2, canvas.height/2 - 60);
ctx.font='26px Arial';
ctx.fillText('æŒ‰ä¸‹ã€Œé–‹å§‹éŠæˆ²ã€é–‹å§‹æŒ‘æˆ°', canvas.width/2, canvas.height/2);

</script>
</body>
</html>


